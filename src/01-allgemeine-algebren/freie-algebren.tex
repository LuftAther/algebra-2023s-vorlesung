\section{Freie Algebren}

\begin{definition}
Sei $ \tau = (n_i)_{i \in I}$, $\mathcal{K}$ eine Klasse von $\tau$-Algebren, $\mathfrak{F} \in K$ und $X \subseteq F$. Dann heißt $\mathfrak{F}$ \emph{frei über} $X$ \emph{in} $\mathcal{K}$\index{Algebra!freie}, wenn es für alle $\mathfrak{A} \in \mathcal{K}$ und alle $\varphi : X \to A$ genau einen Homomorphismus $\overline{\varphi} : \mathfrak{F} \to \mathfrak{A}$ mit $\overline{\varphi} \vert_X = \varphi$ gibt.

\begin{figure}[H]
    \centering
    \begin{tikzpicture}
        \node[name=X,shape=ellipse,draw,minimum width=60,minimum height=90] at (-2,0) {};
        \node at (-3,1.2) {$\mathfrak{F}$};

        \node[name=X,shape=ellipse,draw,minimum width=20,minimum height=30] at (-2,0) {};
        \node at (-2.5,0.4) {$X$};

        \node[name=X,shape=ellipse,draw,minimum width=60,minimum height=90] at (2,0) {};
        \node at (3,1.2) {$\mathfrak{A}$};

        \draw [->] (-2,0.2) to [bend left=15] node [midway,above] {$\varphi$} (2,0.2);
        \draw [->,dashed] (-1.6,1) to [bend left=15] node [midway,above] {$\overline{\varphi}$} (1.6,1);

    \end{tikzpicture}
    \caption{$\mathfrak{F}$ frei über $X$}
\end{figure}
\end{definition}

\begin{example}
    Sei $\mathcal{K}$ die Klasse der Vektorräume über den Körper $\mathbb{C}$, $\mathfrak{V} \in \mathcal{K}$ beliebig und $X \subseteq V$ eine Basis von $\mathfrak{V}$, d. h. $\mathfrak{B}$ ist frei über $X$ in $\mathcal{K}$.

    Mit einer Variablenmenge $X$ ist die Termalgebra $\mathfrak{T}(X, (f_i)_{i \in I})$ frei über $X$ in der Klasse aller $\tau$-Algebren.
\end{example}

\begin{example}
    Sei $\mathcal{K}$ eine Varietät definiert durch Gesetze $\Sigma$, also $\mathcal{K} = \{ \mathfrak{A} \mid \mathfrak{A} \models \Sigma \}$. Sei $\mathfrak{B} \in \mathcal{K}$ so, dass $\Sigma(\mathfrak{B}) = \Sigma$ -- nach dem Beweis des Satzes von Birkhoff wissen wir, dass ein solches $\mathfrak{B}$ existiert! Sei
    $$ \mathfrak{S} \leq \mathfrak{B}^{B^X}, \quad S := \langle \{ \pi_x \mid x \in X \} \rangle, $$
    so ist $\mathfrak{S}$ frei über $\{ \pi_x \mid x \in X \}$ in $\mathcal{K}$.
\end{example}

\begin{proposition}
    Sei $\mathcal{K}$ eine Varietät, $\mathfrak{F}_1, \mathfrak{F}_2 \in \mathcal{K}$ frei über $X$ in $\mathcal{K}$, dann ist $\mathfrak{F}_1 \cong \mathfrak{F}_2$.
\end{proposition}

\begin{figure}[H]
    \centering
    \begin{tikzpicture}
        \node[name=F1,shape=ellipse,draw,minimum width=100,minimum height=70,rotate=-20] at (-0.7,0) {};
        \node[name=F2,shape=ellipse,draw,minimum width=100,minimum height=70,rotate=-20] at (0.7,0) {};
        \node[name=X,shape=circle,draw,minimum size=30] at (0,0) {};

        \node at (-0.6,0.5) {$X$};
        \node at (-2.6,0.8) {$\mathfrak{F}_1$};
        \node at (2.3,0.8) {$\mathfrak{F}_2$};
    \end{tikzpicture}
    \caption{$\mathfrak{F}_1, \mathfrak{F}_2$ frei über $X$}
\end{figure}

\begin{proof}
    Betrachten wir $\id_X : X \to X$, so gibt es eindeutige Homomorphismen $\varphi : \mathfrak{F}_1 \to \mathfrak{F}_2, \psi : \mathfrak{F}_2 \to \mathfrak{F}_1$ mit $\varphi \vert_X = \id_X, \psi \vert_X = \id_X$. Es ist dann $\psi \circ \varphi : \mathfrak{F}_1 \to \mathfrak{F}_1$ ein Homomorphismus mit $(\psi \circ \varphi) \vert_X = \id_X$. Da $\mathfrak{F}_1$ frei über $X$ ist gilt $\phi \circ \varphi = \id_{F_1}$, womit $\psi$ surjektiv und $\varphi$ injektiv ist. Analog folgt, dass $\psi$ injektiv und $\varphi$ surjektiv ist, womit $\varphi, \psi$ Isomorphismen mit $\varphi = \psi^{-1}$ sind.
\end{proof}

\notedate{22.03.2023}

\begin{proposition}
    Sei $\mathcal{K}$ eine Klasse von Algebren mit Typ $(n_i)_{i \in I} =: \tau$. Sei
    $$ \mathcal{S}(\mathcal{K}) := \{ \mathfrak{A} \mid \exists \mathfrak{B} \in \mathcal{K}: \mathfrak{A} \leq \mathfrak{B} \} \subseteq \mathcal{K}, $$
    was insbesondere der Fall ist, falls $\mathcal{K}$ eine Varietät ist. Sei $\mathfrak{F}$ in $\mathcal{K}$ frei über $X \subseteq F$, so ist $\mathfrak{F} = \langle X \rangle$.
\end{proposition}

\begin{proof}
    Zunächst gilt $ \langle X \rangle \leq \mathfrak{F} \in \mathcal{K} $, und damit auch $ \langle X \rangle \in \mathcal{K} $.

    Nun ist $ \langle X \rangle $ frei über $X$ in $\mathcal{K}$. Um dies einzusehen, seien $\mathfrak{A} \in \mathcal{K}, \varphi : X \to A$ beliebig. Zu zeigen ist, dass es eine eindeutigen, $\varphi$ fortsetzenden Homomorphismen $\overline{\varphi} : \langle X \rangle \to \mathfrak{A}$ gibt mit $\overline{\varphi} \vert_X = \varphi$. Wir wissen es gibt einen eindeutigen Homomorphismus $\overline{\overline{\varphi}} : F \to A$ mit $\overline{\overline{\varphi}} \vert_X = \varphi$. Definiere $\overline{\varphi} := \overline{\overline{\varphi}} \vert_{\langle X \rangle}$, so erfüllt dieser Homomorphismus die geforderte Eigenschaft. Die Eindeutigkeit folgt aus Bemerkung \ref{rem:hom-auf-erzeuger}.

    Betrachte $\id_X : (X \subseteq \langle X \rangle) \to (X \subseteq F)$, so gibt es eindeutige Fortsetzungen
    $$ \varphi : \langle X \rangle \to \mathfrak{F}, \quad \varphi \vert_X = \id_X, \quad\quad \psi : \mathfrak{F} \to \langle X \rangle, \quad \psi \vert_X = \id_X, $$
    womit auch $\psi \circ \varphi : \langle X \rangle \to \langle X \rangle$ ein Homomorphismus mit $(\psi \circ \varphi) \vert_X = \id_X$ ist. Mit der Eindeutigkeit folgt $\psi \circ \varphi = \id_{\langle X \rangle}$ und analog damit auch $\varphi \circ \psi = \id_F$.

    Nun sind $\varphi, \psi$ bijektiv, also Isomorphismen. Betrachte nochmals $\varphi : \langle X \rangle \to F, \varphi \vert_X = \id_X$ und sei $c \in \langle X \rangle$ beliebig, so gilt $c = t^{\langle X \rangle}(x_1, ..., x_n)$ mit $x_1, ..., x_n \in X$. Es folgt
    $$ \varphi(c) = \varphi(t^{\langle X \rangle}(x_1, ..., x_n)) = t^{\langle X \rangle}(\varphi(x_1), ..., \varphi(x_n)) = t^{\langle X \rangle}(x_1, ..., x_n) = c, $$
    also $\varphi = \id_{\langle X \rangle}$. Da $\varphi$ surjektiv ist folgt damit $\langle X \rangle = F$.
\end{proof}

\begin{remark} \label{rem:hom-auf-erzeuger}
    Allgemein gilt, dass zwei Homomorphismen übereinstimmen, wenn sie das auf einem Erzeuger tun. Sind also $\mathfrak{C}, \mathfrak{D}$ Algebren, $C = \langle S \rangle$ und $\varphi, \psi : \mathfrak{C} \to \mathfrak{D}$ Homomorphismen mit $\varphi \vert_S = \psi \vert_S$, so folgt $\varphi = \psi$.
\end{remark}

\begin{remark}
    Wir wollen die freie Algebra als Faktoralgebra der Termalgebra darstellen. Sei dazu $\tau := (n_i)_{i \in I}$ eine Signatur und $X$ eine Menge, so ist
    $$ \mathfrak{T}^X := \mathfrak{T}(X, (f_i^\mathfrak{T})_{i \in I}) $$
    frei über $X$ in der Klasse der $\tau$-Algebren.

    Sei $\mathcal{K}$ eine Varietät von $\tau$-Algebren, so stellt sich die Frage ob $\mathfrak{T}^X$ frei über $X$ in $\mathcal{K}$ ist. Allgemein ist dies nicht der Fall, da $\mathfrak{T}^X$ nicht in $\mathcal{K}$ enthalten sein muss.
\end{remark}

\begin{proposition}
    Sei $\mathcal{K}$ eine Varietät und definiere
    $$ \Sigma_X := \{ (s, t) \mid s, t \in T(X), \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s \approx t \} \subseteq T(X)^2, $$
    so ist $\Sigma_X$ eine Kongruenzrelation auf $T(X)$.
\end{proposition}

\begin{proof}
    $\Sigma_X$ ist Äquivalenzrelation:
    \begin{itemize}
        \item reflexiv: Ist $t \in T(X)$ beliebig, so gilt $\forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models t \approx t$.
        \item symmetrisch: Sind $s, t \in T(X), (s,t) \in \Sigma_X$, so gilt
        $$ \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s \approx t \quad \implies \quad \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models t \approx s, $$
        also $(t,s) \in \Sigma_X$.
        \item transitiv: Sind $s,t,u \in T(X), (s,t), (t,u) \in \Sigma_X$, so gilt
        $$ (\forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s \approx t \quad \land \quad \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models t \approx u) \quad \implies \quad \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s \approx u, $$
        also $(s,u) \in \Sigma_X$.
    \end{itemize}
    Um zu sehen, dass $\Sigma_X$ auch eine Kongruenzrelation ist, seien $i \in I, (s_1, t_1), ..., (s_{n_i}, t_{n_i}) \in \Sigma_X$. Zu zeigen ist $(f_i(s_1, ..., s_{n_i}), f_i(t_1, ..., t_{n_i})) \in \Sigma_X$. Es gilt
    $$ \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s_1 \approx t_1 \land ... \land s_{n_i} \approx t_{n_i}, $$
    insbesondere folgt also
    $$ \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models f_i(s_1, ..., s_{n_i}) \approx f_i(t_1, ..., t_{n_i}) $$
    und damit $(f_i(s_1, ..., s_{n_i}), f_i(t_1, ..., t_{n_i})) \in \Sigma_X$.
\end{proof}

\begin{definition}
    Wir definieren $ \mathfrak{T}^{X, \Sigma_X} := \mathfrak{T}^X /_{\Sigma_X}$.
\end{definition}

\begin{theorem}\label{theorem:freie_faktoralgebra}
    $\mathfrak{T}^{X, \Sigma_X}$ ist frei über $X$ in $\mathcal{K}$.
\end{theorem}

\begin{proof}
    Sei $\mathfrak{B} \in \mathcal{K}$ mit
    $$ \Sigma(\mathfrak{B}) := \{ s \approx t \mid \mathfrak{B} \models s \approx t \} = \Sigma(\mathcal{K}) := \{ s \approx t \mid \forall \mathfrak{A} \in \mathcal{K}: \mathfrak{A} \models s \approx t \}, $$
    wobei wir die Existenz aus dem Beweis des Satzes von Birkhoff wissen.
    
    Sei $\langle \{ \pi_x \mid x \in X \} \rangle =: \mathfrak{S} \leq \mathfrak{B}^{B^X}$, wobei $\pi_x : B^X \to B, \alpha \mapsto \alpha(x)$ (wie im Beweis des Satzes von Birkhoff), so wissen wir, dass $\mathfrak{S}$ frei über $\{ \pi_x \mid x \in X \}$ in $\mathcal{K}$.

    Betrachte
    $$ \varphi: \mathfrak{S} \to \mathfrak{T}^{X, \Sigma_X}, t^\mathfrak{S} (\pi_{x_1}, ..., \pi_{x_n}) \mapsto [t(x_1,...,x_n)]_{\Sigma_X}. $$

    Zunächst ist $\varphi$ wohldefiniert: Seien dazu $u, v \in T(X)$ mit $u^\mathfrak{S} (\pi_{x_1}, ..., \pi_{x_n}) = v^\mathfrak{S}(\pi_{x_1'}, ..., \pi_{x_m'})$, so gilt für alle $\mathfrak{A} \in \mathcal{K}$, dass $\mathfrak{A} \models u(x_1, ..., x_n) \approx v(x_1', ..., x_m')$, womit $(u(x_1, ..., x_n), v(x_1', ..., x_m')) \in \Sigma_X$ und damit $[u(x_1, ..., x_n)]_{\Sigma_X} = [v(x_1', ..., x_m')]_{\Sigma_X}$ folgt.

    Weiters ist $\varphi$ surjektiv, da mit beliebigem $[t(x_1,...,x_n)]_{\Sigma_X} \in \mathfrak{T}^{X, \Sigma_X}$ sofort \\ $t^\mathfrak{S}(\pi_{x_1}, ..., \pi_{x_n}) \overset{\varphi}{\mapsto} [t(x_1,...,x_n)]_{\Sigma_X}$ gilt.

    Um einzusehen, dass $\varphi$ injektiv ist seien $u, v \in T(X)$ mit $[u(x_1, ..., x_n)]_{\Sigma_X} = [v(x_1', ..., x_m')]_{\Sigma_X}$ beliebig, so gilt für alle $\mathfrak{A} \in \mathcal{K}$, dass $\mathfrak{A} \models u(x_1, ..., x_n) \approx v(x_1', ..., x_m')$. Inbesondere gilt $\mathfrak{S} \models u(x_1, ..., x_n) \approx v(x_1', ..., x_m')$ und damit $u^\mathfrak{S}(\pi_{x_1}, ..., \pi_{x_n}) = v^\mathfrak{S}(\pi_{x_1'}, ..., \pi_{x_m'})$.

    Dass $\varphi$ ein Homomorphismus ist verifiziert man unmittelbar in Analogie zum Beweis des Satzes von Birkhoff. Damit ist $\varphi$ insgesamt also ein Isomorphismus, $\mathfrak{S} \cong \mathfrak{T}^{X, \Sigma_X}$, womit $\mathfrak{T}^{X, \Sigma_X}$ frei über $\{ [x]_{\Sigma_X} \mid x \in X \}$ ist.
\end{proof}

\begin{example}
    Bezeichne $(\cdot, e, {}^{-1})$ vom Typ $\tau = (2,0,1)$ die Sprache der Gruppen. Sei $X = \{ x_1, x_2, ... \}$ eine Variablenmenge so sind
    $$ \left. \begin{matrix} x_1, x_2, x_3, ... \\ e, x_1 \cdot x_2, x_2 \cdot x_1, x_1^{-1}, ... \\ e \cdot x_1, x_1 \cdot e, (x_1 \cdot x_2) \cdot x_3, x_1 \cdot (x_2 \cdot x_3), ... \\ \vdots \end{matrix} \quad \right\} \quad \begin{matrix} (T(X), \cdot^\mathfrak{T}, e^\mathfrak{T}, {{}^{-1}}^\mathfrak{T}) \textrm{ ist frei über} \\ X \textrm{ in der Klasse aller $\tau$-Algebren.} \end{matrix} $$
    Beispiele für Terme respektiver 1., 2. und 3. Stufe. Bezeichne nun
    $$ \Sigma_X = \{ (e \cdot x_1, x_1), ((x_1 \cdot x_2) \cdot x_3, x_1 \cdot (x_2 \cdot x_3)), (e, x_1 \cdot x_1^{-1}), ... \} $$
    als die Menge aller Gesetze welche in allen Gruppen gelten. Faktorisieren wir nun nach Term\-äquivalenz, so erhalten wir
    $$ T(X) /_{\Sigma_X} = \{ [x_1], [x_2], ..., [x_1, x_2], [x_2, x_1], ... \}. $$
    Jedes Element $t$ von $T(X) /_{\Sigma_X}$ (außer $e$) hat also einen Repräsentanten der Form $a_1 \cdot a_2 \cdot ... \cdot a_n$, wobei $a_i = x_j$ oder $a_i = x_j^{-1}$ für ein $j$, aber nie $x_j$ und $x_j^{-1}$ aufeinanderfolgen oder umgekehrt.
\end{example}
\notedate{23.03.2023}